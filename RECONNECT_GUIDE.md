# 重新链接邮箱 - 快速指南

## ✅ 数据库已清除

所有旧数据已删除，可以重新开始。

---

## 🚀 重新链接步骤

### 1️⃣ 启动应用

```bash
npm run electron:dev
```

### 2️⃣ 添加邮箱账户

点击应用界面中的 "+" 或 "Add Account" 按钮

### 3️⃣ 选择邮箱类型

- Gmail（OAuth）
- Outlook
- Yahoo
- QQ 邮箱
- 网易 163
- iCloud
- 自定义 IMAP

### 4️⃣ 完成登录

- 输入邮箱地址和密码
- 或点击 OAuth 提供商按钮
- 授权应用访问邮件

### 5️⃣ 等待同步

- 应用会自动同步最近 7 天的邮件
- 检查邮件是否正确显示
- 特别检查之前乱码的邮件

---

## 🔍 验证修复

### ✅ 检查项

邮件同步完成后，检查：

- [ ] 邮件主题正确显示
- [ ] 邮件内容不乱码
- [ ] 中文文本清晰可读
- [ ] 附件列表正确
- [ ] 邮件预览正确

### 📊 查看日志

在启动应用的终端中查找以下日志，表示修复已激活：

```
[email:sync] Auto-recovered UTF-8 encoding from IMAP data
[email:list] Auto-recovered UTF-8 encoding for email
```

---

## 🧪 推荐的测试邮箱

为了充分测试修复，建议依次添加：

### 1. Apple/iCloud 邮箱
- 最常见的乱码问题来源
- 使用 iCloud 特殊的字符编码

### 2. QQ 邮箱
- 使用 GB2312/GBK 编码
- 常见的中文编码问题

### 3. 网易 163 邮箱
- 同样使用 GB2312/GBK
- 验证中文支持

### 4. Gmail/Outlook
- 标准 UTF-8 编码
- 应该总是正常显示

---

## 💡 遇到问题？

### 邮件仍然乱码

1. 检查终端日志中是否有恢复提示
2. 确认邮箱账户信息输入正确
3. 检查网络连接
4. 查看邮件在原始客户端中的样子

### 邮件无法同步

1. 验证邮箱密码或 OAuth 授权
2. 检查网络连接
3. 查看应用中的错误提示
4. 某些邮箱可能需要特殊的应用密码

### 应用崩溃

1. 检查终端是否有错误信息
2. 重启应用
3. 查看 package.json 依赖是否正确安装

---

## 📝 备份信息

如果清除前有重要邮件，您可以：

1. **查看备份**
   ```
   C:\Users\[用户名]\AppData\Local\Nexus Mail\backups\
   ```

2. **恢复备份**（如需要）
   ```
   1. 关闭邮件应用
   2. 复制备份文件到:
      C:\Users\[用户名]\AppData\Local\Nexus Mail\nexus-mail.db
   3. 重启应用
   ```

---

## ⏱️ 预期时间

- 启动应用：< 5 秒
- 添加邮箱：30-60 秒
- 同步邮件：30-120 秒（取决于邮件数量）
- 总计：2-3 分钟

---

## 🎯 成功标志

当您看到以下情况时，说明一切正常：

✅ 邮件列表显示（不是空的）  
✅ 邮件主题显示中文或特殊字符（不乱码）  
✅ 邮件预览可读  
✅ 可以点击查看完整邮件  
✅ 完整邮件内容显示正确  

---

## 📞 下一步

1. **启动应用**：`npm run electron:dev`
2. **添加邮箱**：按照上述步骤
3. **验证修复**：检查邮件是否正确显示
4. **反馈结果**：告诉我修复是否有效

---

**祝好运！** 💫

如果修复有效，乱码问题应该得到解决。

---

*最后更新：2025-12-07*
