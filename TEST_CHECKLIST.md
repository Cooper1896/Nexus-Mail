# 邮件服务商认证功能 - 测试清单

## 📋 测试场景

### 1️⃣ 添加 Gmail 账户

**前置条件:**
- 拥有有效的 Gmail 账户
- 已启用 2FA 并生成了应用专用密码

**测试步骤:**
- [ ] 打开应用 → 点击"添加账户"
- [ ] 选择 "Gmail" 提供商
- [ ] 输入邮箱地址和应用专用密码
- [ ] 查看帮助 (i) 图标，确认显示步骤
- [ ] 点击"添加账户"
- [ ] 验证账户成功添加
- [ ] 在设置中查看账户详情
- [ ] 点击"立即同步"，验证邮件拉取
- [ ] 尝试删除账户，确认确认对话框

**预期结果:** ✅ 账户正常工作，邮件可同步

---

### 2️⃣ 添加 Outlook 账户

**前置条件:**
- 拥有有效的 Outlook/Hotmail 账户
- 了解密码要求（常规密码或应用密码）

**测试步骤:**
- [ ] 打开应用 → 点击"添加账户"
- [ ] 选择 "Outlook" 提供商
- [ ] 输入邮箱和密码
- [ ] 如果失败，查看错误消息和建议
- [ ] 使用应用密码重试（如需要）
- [ ] 验证账户添加成功
- [ ] 检查邮件同步

**预期结果:** ✅ 账户能够连接并同步邮件

---

### 3️⃣ 添加 QQ 邮箱账户

**前置条件:**
- 拥有 QQ 邮箱账户
- 已在 QQ 邮箱设置中启用 IMAP/SMTP
- 已生成授权码

**测试步骤:**
- [ ] 打开应用 → 点击"添加账户"
- [ ] 选择 "QQ 邮箱" 提供商
- [ ] 输入 QQ 邮箱地址（如 xxxxx@qq.com）
- [ ] 输入授权码（不是密码）
- [ ] 点击帮助图标查看步骤
- [ ] 验证账户添加成功
- [ ] 同步邮件

**预期结果:** ✅ 能够连接 QQ 邮箱并获取邮件

---

### 4️⃣ 添加自定义 IMAP 账户

**前置条件:**
- 知道邮箱提供商的 IMAP/SMTP 信息
- 有有效的邮箱凭证

**测试步骤:**
- [ ] 打开应用 → 点击"添加账户"
- [ ] 选择 "自定义 IMAP" 提供商
- [ ] 输入邮箱地址
- [ ] 输入密码
- [ ] 输入 IMAP 服务器信息（主机、端口、SSL）
- [ ] 输入 SMTP 服务器信息（主机、端口）
- [ ] 点击"添加账户"
- [ ] 验证连接成功
- [ ] 尝试同步

**预期结果:** ✅ 自定义 IMAP 账户正常工作

---

### 5️⃣ 错误处理场景

#### 场景 A: 错误的邮箱格式
- [ ] 输入 "notanemail"
- [ ] 验证显示格式错误信息
- [ ] "添加账户"按钮被禁用

**预期结果:** ✅ 显示明确的验证错误

#### 场景 B: 错误的凭证
- [ ] 输入有效的邮箱，但密码错误
- [ ] 点击"添加账户"
- [ ] 验证显示认证失败错误
- [ ] 错误消息提示应用密码或联系支持

**预期结果:** ✅ 显示有用的错误消息

#### 场景 C: IMAP 未启用
- [ ] 尝试添加 QQ 邮箱，但未启用 IMAP
- [ ] 验证错误消息指导启用 IMAP

**预期结果:** ✅ 清晰的错误指导

#### 场景 D: 连接超时
- [ ] 输入无效的 IMAP 服务器（自定义 IMAP）
- [ ] 点击"添加账户"
- [ ] 等待超时
- [ ] 验证显示连接超时错误

**预期结果:** ✅ 合理的超时处理

---

### 6️⃣ 账户管理

#### 查看账户列表
- [ ] 打开设置 → 邮箱账户
- [ ] 验证显示已添加的所有账户
- [ ] 验证显示提供商图标和颜色
- [ ] 验证显示同步状态

**预期结果:** ✅ 所有账户显示正确

#### 查看账户详情
- [ ] 点击一个账户
- [ ] 验证显示：
  - [ ] 账户邮箱地址
  - [ ] 服务商
  - [ ] 显示名称
  - [ ] 最后同步时间
  - [ ] IMAP/SMTP 信息（如适用）
  - [ ] 连接状态

**预期结果:** ✅ 所有账户信息显示正确

#### 编辑账户显示名称
- [ ] 在账户详情中修改显示名称
- [ ] 验证更改已保存
- [ ] 返回列表，确认显示名称已更新

**预期结果:** ✅ 可以编辑显示名称

#### 同步账户
- [ ] 点击"立即同步"
- [ ] 验证显示"正在同步..."状态
- [ ] 等待同步完成
- [ ] 验证显示"最后同步时间"已更新

**预期结果:** ✅ 邮件成功同步

#### 删除账户
- [ ] 点击"删除账户"
- [ ] 验证显示确认对话框
- [ ] 确认删除
- [ ] 验证账户已从列表中移除
- [ ] 验证账户的邮件已删除

**预期结果:** ✅ 账户和相关数据已删除

---

### 7️⃣ 密码安全

#### 密码加密验证
- [ ] 添加账户后，检查数据库文件
- [ ] 验证密码存储为加密形式（不是明文）
- [ ] 验证只能在当前用户/计算机解密

**预期结果:** ✅ 密码安全加密

#### 密码可见性切换
- [ ] 在添加账户对话框中输入密码
- [ ] 点击眼睛图标切换可见性
- [ ] 验证密码显示/隐藏正常工作

**预期结果:** ✅ 密码可见性可控制

---

### 8️⃣ UI/UX 验证

#### 帮助信息显示
- [ ] 对于每个需要应用密码的提供商，查看帮助图标
- [ ] 点击帮助，验证显示：
  - [ ] 逐步指导
  - [ ] 生成页面链接
  - [ ] 完整帮助文档链接
  - [ ] 服务商特定信息

**预期结果:** ✅ 帮助信息完整且有用

#### 中文界面
- [ ] 验证所有界面文本为中文
- [ ] 检查：
  - [ ] 按钮标签
  - [ ] 错误消息
  - [ ] 帮助文本
  - [ ] 菜单项

**预期结果:** ✅ 完整的中文界面

#### 响应式设计
- [ ] 调整窗口大小
- [ ] 验证对话框和设置适应不同大小
- [ ] 检查在小屏幕上的可用性

**预期结果:** ✅ 界面在各种大小下都可用

---

### 9️⃣ 性能测试

#### 账户添加性能
- [ ] 添加 5+ 账户
- [ ] 验证应用保持响应
- [ ] 检查没有内存泄漏

**预期结果:** ✅ 性能良好

#### 同步性能
- [ ] 同时同步多个账户
- [ ] 验证没有冲突或错误
- [ ] 检查 UI 保持响应

**预期结果:** ✅ 多账户同步工作正常

#### 数据库性能
- [ ] 添加 100+ 邮件到每个账户
- [ ] 验证查询性能正常
- [ ] 检查数据库文件大小合理

**预期结果:** ✅ 性能满足要求

---

### 🔟 多账户场景

#### 混合提供商
- [ ] 添加 Gmail、Outlook、QQ、自定义 IMAP 账户
- [ ] 验证每个账户独立工作
- [ ] 验证邮件来自正确的账户

**预期结果:** ✅ 支持混合提供商

#### 相同提供商多账户
- [ ] 为同一提供商添加多个账户
- [ ] 验证每个账户独立同步
- [ ] 验证邮件不混淆

**预期结果:** ✅ 支持多个相同提供商账户

---

## 🐛 已知问题和限制

| 问题 | 优先级 | 状态 | 说明 |
|------|--------|------|------|
| 某些提供商需要启用"安全性较低的应用" | 中 | 已记录 | 需要改进的错误消息 |
| IMAP 连接超时默认为 10 秒 | 低 | 已实现 | 可在设置中配置 |
| 不支持 OAuth 2.0 | 高 | 规划中 | 未来版本 |
| 邮件同步限制为最近 20 条 | 低 | 已实现 | 性能优化 |

---

## 📊 测试覆盖率

```
总测试场景: 30+
✅ 已通过: __/__
❌ 失败: __/__
⏭️ 跳过: __/__
```

---

## 🔍 验收标准

在声称功能完成前，必须满足以下条件：

- [ ] 所有 10 个主要测试场景通过
- [ ] 没有控制台错误或警告
- [ ] 所有错误情况处理正确
- [ ] UI 在所有支持的浏览器/分辨率上可用
- [ ] 性能指标符合标准
- [ ] 文档完整且准确
- [ ] 代码已检查和优化

---

## 📝 测试报告模板

**测试日期:** _______________  
**测试人员:** _______________  
**Nexus Mail 版本:** _______________  

### 总体结果
- [ ] 通过
- [ ] 失败
- [ ] 部分通过

### 失败的测试
1. ___________________________________
2. ___________________________________
3. ___________________________________

### 注释
___________________________________

### 签名
___________ 日期: _______________

---

**最后更新:** 2025-12-06  
**维护者:** 开发团队
